PROTO_0:
  NEWTABLE R3 0 0
  NEWTABLE R4 0 0
  MOVE R5 R0
  LOADNIL R6
  LOADNIL R7
  FORGPREP R5
  MOVE R12 R9
  NAMECALL R10 R1 K0 ["getScriptInstanceFromGUID"]
  CALL R10 2 1
  GETUPVAL R11 0
  MOVE R13 R10
  NAMECALL R11 R11 K1 ["GetScriptBackupChunks"]
  CALL R11 2 1
  JUMPIFNOT R11 [+10]
  GETUPVAL R12 0
  MOVE R14 R10
  MOVE R15 R11
  NAMECALL R12 R12 K2 ["DidSourceChange"]
  CALL R12 3 1
  JUMPIFNOT R12 [+3]
  LOADB R12 1
  SETTABLE R12 R3 R9
  SETTABLE R11 R4 R9
  FORGLOOP R5 2 [-21]
  GETIMPORT R5 K4 [next]
  MOVE R6 R4
  CALL R5 1 1
  MOVE R6 R4
  LOADNIL R7
  LOADNIL R8
  FORGPREP R6
  MOVE R13 R9
  NAMECALL R11 R1 K0 ["getScriptInstanceFromGUID"]
  CALL R11 2 1
  MOVE R14 R9
  NAMECALL R12 R1 K5 ["setRevertedScriptSource"]
  CALL R12 2 0
  GETUPVAL R12 0
  MOVE R14 R11
  GETTABLEN R15 R10 1
  NAMECALL R12 R12 K6 ["ReplaceWithChunk"]
  CALL R12 3 0
  LENGTH R12 R10
  LOADN R13 1
  JUMPIFNOTLT R13 R12 [+12]
  LOADN R14 2
  LENGTH R12 R10
  LOADN R13 1
  FORNPREP R12
  GETUPVAL R15 0
  MOVE R17 R11
  GETTABLE R18 R10 R14
  NAMECALL R15 R15 K7 ["AppendChunk"]
  CALL R15 3 0
  FORNLOOP R12
  JUMPIFNOT R2 [+3]
  MOVE R12 R2
  MOVE R13 R9
  CALL R12 1 0
  JUMPIFEQ R9 R5 [+5]
  MOVE R14 R9
  NAMECALL R12 R1 K8 ["closeScriptIfOpen"]
  CALL R12 2 0
  FORGLOOP R6 2 [-40]
  JUMPIFNOT R5 [+4]
  MOVE R8 R5
  NAMECALL R6 R1 K8 ["closeScriptIfOpen"]
  CALL R6 2 0
  RETURN R3 1

MAIN:
  PREPVARARGS 0
  GETIMPORT R0 K1 [script]
  LOADK R2 K2 ["R15Migrator"]
  NAMECALL R0 R0 K3 ["FindFirstAncestor"]
  CALL R0 2 1
  GETIMPORT R1 K5 [require]
  GETTABLEKS R5 R0 K6 ["Src"]
  GETTABLEKS R4 R5 K7 ["Util"]
  GETTABLEKS R3 R4 K8 ["ScriptHistory"]
  GETTABLEKS R2 R3 K9 ["ChunkUtil"]
  CALL R1 1 1
  DUPCLOSURE R2 K10 [PROTO_0]
  CAPTURE VAL R1
  RETURN R2 1
